<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CJA Professional Demo Store</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://assets.adobedtm.com/e72b4113c11a/86ee37b431d3/launch-bd7ab64d003c.min.js" async></script>
<script>
  window.digitalData = {
    event: "",
    product: {
      id: "",
      name: "",
      price: 0,
      quantity: 1
    }
  };
</script>
<style>
*{box-sizing:border-box;font-family:'Inter',sans-serif;}

body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(180deg,#f8fafc,#eef2f7);
  color:#0f172a;
}

header{
  padding:60px 20px 40px;
  text-align:center;
}

header h1{
  font-size:44px;
  font-weight:700;
  margin-bottom:8px;
}

header p{
  font-size:17px;
  color:#64748b;
}

.container{
  max-width:1200px;
  margin:auto;
  padding:0 20px 60px;
}

.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
  gap:25px;
  margin-top:40px;
}

.card{
  background:white;
  border-radius:18px;
  padding:20px;
  box-shadow:0 10px 22px rgba(15,23,42,.08);
  transition:.3s ease;
}

.card:hover{
  transform:translateY(-5px);
  box-shadow:0 16px 32px rgba(15,23,42,.12);
}

.product-img{
  height:130px;
  border-radius:14px;
  background:linear-gradient(135deg,#dbeafe,#e0f2fe);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:17px;
  font-weight:600;
  margin-bottom:12px;
}

.price{
  font-weight:700;
  font-size:18px;
}

.rating{
  color:#f59e0b;
}

button{
  width:100%;
  margin-top:12px;
  border:none;
  padding:12px;
  border-radius:14px;
  background:#2563eb;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  color:white;
  transition:.25s;
}

button:hover{
  background:#1d4ed8;
}

.cart{
  margin-top:50px;
  background:white;
  border-radius:18px;
  padding:25px;
  box-shadow:0 14px 30px rgba(15,23,42,.1);
  max-width:520px;
  margin-left:auto;
  margin-right:auto;
}

.cart h2{
  margin-top:0;
}

.cart-item{
  display:flex;
  justify-content:space-between;
  padding:6px 0;
}

.total{
  font-size:20px;
  font-weight:700;
  margin-top:12px;
}

.checkout{
  background:#22c55e;
}

.checkout:hover{
  background:#16a34a;
}

footer{
  text-align:center;
  padding:20px;
  color:#64748b;
}
</style>
</head>

<body>

<header>
  <h1>CJA Demo Store</h1>
</header>

<div class="container">

  <div class="products" id="products"></div>

  <div class="cart">
    <h2>Shopping Cart</h2>
    <div id="cartItems">Cart is empty</div>
    <div class="total" id="total">Total: ‚Çπ0</div>
    <button class="checkout" onclick="placeOrder()">Place Order</button>
  </div>

</div>

<footer>¬© 2026 ‚Ä¢ CJA Portfolio Project</footer>

<script>
const products=[
 {id:1,name:'iPhone 15',price:75000,rating:4.8},
 {id:2,name:'Sony WH-1000XM5',price:30000,rating:4.6},
 {id:3,name:'MacBook Air M2',price:115000,rating:4.9},
 {id:4,name:'Samsung Galaxy Watch',price:28000,rating:4.5},
 {id:5,name:'iPad Air',price:55000,rating:4.7}
];

let cart=[];

function renderProducts(){
 let html='';
 products.forEach(p=>{
   html+=`
   <div class="card">
     <div class="product-img">${p.name}</div>
     <div class="price">‚Çπ${p.price}</div>
     <div class="rating">‚≠ê ${p.rating}</div>
     <button onclick="addToCart(${p.id})">Add To Cart</button>
   </div>`;
 });
 document.getElementById('products').innerHTML=html;
}

function addToCart(id) {
  let product = products.find(p => p.id === id);
  cart.push(product);
  updateCart();

  // üî• Adobe Tracking Object
  window.digitalData.event = "add_to_cart";
  window.digitalData.product.name = product.name;
  window.digitalData.product.price = product.price;
  window.digitalData.product.quantity = 1;

  console.log("Digital Data:", window.digitalData);
}
function updateCart(){
 if(cart.length===0){
   document.getElementById('cartItems').innerHTML='Cart is empty';
   document.getElementById('total').innerText='Total: ‚Çπ0';
   return;
 }

 let html=''; let total=0;
 cart.forEach(p=>{
   total+=p.price;
   html+=`<div class="cart-item"><span>${p.name}</span><span>‚Çπ${p.price}</span></div>`;
 });
 document.getElementById('cartItems').innerHTML=html;
 document.getElementById('total').innerText='Total: ‚Çπ'+total;
 console.log('CJA Event ‚Üí cart_update',cart);
}

function placeOrder() {
  if (cart.length === 0) {
    alert('Cart is empty');
    return;
  }

  // Save cart for Adobe
  window.lastPurchasedCart = JSON.parse(JSON.stringify(cart));

  console.log("Saved purchase cart:", window.lastPurchasedCart);

  // üî• Delay firing so Adobe always reads updated memory
  setTimeout(() => {
    document.dispatchEvent(new CustomEvent("cja_purchase"));
  }, 100);

  alert('üéâ Order placed successfully!');

  cart = [];
  updateCart();
}
renderProducts();
</script>

</body>
</html>
